@page "/Items/{ItemId}/Edit"

@using SimpleDataManagementSystem.Frontend.Web.Razor.ViewModels.Write
@using SimpleDataManagementSystem.Frontend.Web.Razor.ViewModels.Read

@model SimpleDataManagementSystem.Frontend.Web.Razor.Pages.Items.EditItemModel

@{
    ViewData["Title"] = "Edit Item";
}

<h1>Edit Item</h1>
<br />

<div style="text-align:center; border:1px solid black; padding:20px;">
    <form method="post" enctype="multipart/form-data">
        <label for="name">Naziv proizvoda:</label>
        <br />
        <input value="@Model.Item.Nazivproizvoda" name="nazivproizvoda" />

        <br />
        
        <label for="name">Opis:</label>
        <br />
        <textarea type="text" cols="40" rows="5" name="opis">@Model.Item.Opis</textarea>

        <br />
        
        <label for="name">Datum akcije:</label>
        <br />
        <input value="@Model.Item.Datumakcije" name="datumakcije" />

        <br />
        
        <label for="name">Naziv retailera:</label>
        <br />
        <input value="@Model.Item.Nazivretailera" name="nazivretailera" />

        <br />
        

        <label for="kategorija">Kategorija</label>
        <br />
        <select name="kategorija">
            @if (Model.AvailableCategories != null)
            {
                @foreach (var r in Model.AvailableCategories)
                {
                    <option name="kategorija" value="@r.ID" selected="@(Model.Item.Kategorija == r.ID)">@r.Name</option>
                }
            }
        </select>


        <br />

        <label for="cijena">Cijena:</label>
        <br />
        <input value="@Model.Item.Cijena" name="cijena" />

        <br />

        <label>Slika:</label>
        <br />
        <img id="thumbnail" src="@Model.Item.URLdoslikeUri"  style="max-width:300px; max-height:300px;" />
        
        <br />
        <br />

        <label for="URLdoslike">Dodaj novu sliku:</label>
        <br />
        <br />
        <input id="thumbnailUpload" type="file" name="URLdoslike" onchange="loadThumbnail(event)" />
        <br />

        <br />
        <br />

        <button type="submit">Update</button>
    </form>
</div>

@section scripts {
    <script>
        var loadThumbnail = function(event) {
            var output = document.getElementById('thumbnail');
            output.src = URL.createObjectURL(event.target.files[0]);
            output.onload = function() {
                URL.revokeObjectURL(output.src) // free memory
            }
        };
    </script>
}